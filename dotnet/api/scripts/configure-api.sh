#!/bin/bash
NEW_API_CONTROLLERS_SHARED_APICONTROLLERBASE="$PROJECT_NAME.Api/Controllers/Shared/ApiControllerBase.cs"
NEW_API_CONTROLLERS_V1_EXAMPLECONTROLLER="$PROJECT_NAME.Api/Controllers/v1/ExampleController.cs"
NEW_API_EXTENSIONS_APIVERSIONINGSETUP="$PROJECT_NAME.Api/Extensions/ApiVersioningSetup.cs"
NEW_API_EXTENSIONS_SWAGGERSETUP="$PROJECT_NAME.Api/Extensions/SwaggerSetup.cs"
NEW_API_PROPERTIES_LAUNCHSETTINGS="$PROJECT_NAME.Api/Properties/launchSettings.json"
NEW_API_APPSETTINGSDEVELOPMENT="$PROJECT_NAME.Api/appsettings.Development.json"
NEW_API_DOCKERFILE="$PROJECT_NAME.Api/Dockerfile"
NEW_API_DOCKERFILELIVE="$PROJECT_NAME.Api/Dockerfile.live"
NEW_API_PROGRAM="$PROJECT_NAME.Api/Program.cs"

sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_CONTROLLERS_SHARED_APICONTROLLERBASE" > "$NEW_API_CONTROLLERS_SHARED_APICONTROLLERBASE"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_CONTROLLERS_V1_EXAMPLECONTROLLER" > "$NEW_API_CONTROLLERS_V1_EXAMPLECONTROLLER"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_EXTENSIONS_APIVERSIONINGSETUP" > "$NEW_API_EXTENSIONS_APIVERSIONINGSETUP"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_EXTENSIONS_SWAGGERSETUP" > "$NEW_API_EXTENSIONS_SWAGGERSETUP"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_PROPERTIES_LAUNCHSETTINGS" > "$NEW_API_PROPERTIES_LAUNCHSETTINGS"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_APPSETTINGSDEVELOPMENT" > "$NEW_API_APPSETTINGSDEVELOPMENT"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_DOCKERFILE" > "$NEW_API_DOCKERFILE"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_DOCKERFILELIVE" > "$NEW_API_DOCKERFILELIVE"
sed "s/{{PROJECT_NAME}}/$PROJECT_NAME/g" "$PATH_TEMPLATES_BASE_API_PROGRAM" > "$NEW_API_PROGRAM"


validate_file "$NEW_API_CONTROLLERS_SHARED_APICONTROLLERBASE"
validate_file "$NEW_API_CONTROLLERS_V1_EXAMPLECONTROLLER"
validate_file "$NEW_API_EXTENSIONS_APIVERSIONINGSETUP"
validate_file "$NEW_API_EXTENSIONS_SWAGGERSETUP"
validate_file "$NEW_API_PROPERTIES_LAUNCHSETTINGS"
validate_file "$NEW_API_APPSETTINGSDEVELOPMENT"
validate_file "$NEW_API_DOCKERFILE"
validate_file "$NEW_API_DOCKERFILELIVE"
validate_file "$NEW_API_PROGRAM"

print_info "Created API structures."